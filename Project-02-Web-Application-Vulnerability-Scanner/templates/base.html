<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web Vulnerability Scanner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Font Awesome for icons (CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="theme-toggle">
        <button id="theme-toggle-btn" aria-label="Toggle dark mode" type="button">
            <i id="theme-icon" class="fa-solid fa-moon"></i>
            <span id="theme-tooltip" class="theme-tooltip" tabindex="-1">Dark mode</span>
        </button>
    </div>
    <div class="container">
        <h1>Web Vulnerability Scanner</h1>
        {% block content %}{% endblock %}
    </div>
    <script>
        const toggleBtn = document.getElementById('theme-toggle-btn');
        const icon = document.getElementById('theme-icon');
        const tooltip = document.getElementById('theme-tooltip');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            icon.className = theme === 'dark'
                ? 'fa-solid fa-sun'
                : 'fa-solid fa-moon';
            tooltip.textContent = theme === 'dark'
                ? 'Light mode'
                : 'Dark mode';
        }

        let theme = localStorage.getItem('theme');
        if (!theme) {
            theme = prefersDark ? 'dark' : 'light';
        }
        setTheme(theme);

        toggleBtn.addEventListener('click', () => {
            theme = (theme === 'dark') ? 'light' : 'dark';
            setTheme(theme);
            // Immediately blur the button after click to remove focus/active state
            toggleBtn.blur();
        });
    </script>
</body>
</html>